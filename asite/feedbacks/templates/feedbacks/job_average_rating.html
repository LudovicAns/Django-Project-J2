{% extends "base.html" %}

{% block title %}Average Rating for {{ job_title.name }}{% endblock %}

{% block content %}
    <h1 class="text-2xl font-bold mb-6">Average Rating for {{ job_title.name }}</h1>
    <p class="text-gray-600 mb-4">Based on feedbacks for {{ jobs.count }} job{{ jobs.count|pluralize }} with this title</p>

    <div class="text-center my-12 py-8 bg-white rounded-lg shadow-md">
        {% if average_rating %}
            <div class="text-5xl font-bold text-green-600">{{ average_rating|floatformat:1 }}</div>
            <div class="text-lg text-gray-600 mt-2">out of 5</div>
            <div class="flex justify-center mt-4 space-x-1">
                {% for i in "12345" %}
                    {% if forloop.counter <= average_rating|floatformat:0|add:"0" %}
                        <span class="text-4xl text-yellow-400">★</span>
                    {% else %}
                        <span class="text-4xl text-gray-300">★</span>
                    {% endif %}
                {% endfor %}
            </div>
        {% else %}
            <p class="text-gray-500 italic text-lg">No ratings available for this job title yet.</p>
        {% endif %}
    </div>

    <div class="flex justify-center space-x-4 mt-8">
        <a href="{% url 'job_title_feedbacks' job_title.id %}" class="text-green-600 hover:text-green-800 font-medium">View Job Feedbacks</a>
        <span class="text-gray-500">|</span>
        <a href="{% url 'all_feedbacks' %}" class="text-green-600 hover:text-green-800 font-medium">View All Feedbacks</a>
        <span class="text-gray-500">|</span>
        <a href="{% url 'add_feedback' %}" class="text-green-600 hover:text-green-800 font-medium">Add a Feedback</a>
        <span class="text-gray-500">|</span>
        <a href="{% url 'select_job' %}" class="text-green-600 hover:text-green-800 font-medium">Back to Job Titles</a>
    </div>
{% endblock %}
